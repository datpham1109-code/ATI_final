(()=>{var e={};e.id=455,e.ids=[455],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},50852:e=>{"use strict";e.exports=require("async_hooks")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},73292:e=>{"use strict";e.exports=require("fs/promises")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},47261:e=>{"use strict";e.exports=require("node:util")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},31404:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>f,originalPathname:()=>b,pages:()=>l,routeModule:()=>u,tree:()=>o});var r=t(50482),s=t(69108),d=t(62563),n=t.n(d),c=t(68300),i={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>c[e]);t.d(a,i);let o=["",{children:["dashboard",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,82849)),"/home/ubuntu/github_repo/ieltstrek/app/dashboard/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,90613)),"/home/ubuntu/github_repo/ieltstrek/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,16238)),"/home/ubuntu/github_repo/ieltstrek/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/home/ubuntu/github_repo/ieltstrek/app/dashboard/settings/page.tsx"],b="/dashboard/settings/page",f={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/settings/page",pathname:"/dashboard/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},24005:(e,a,t)=>{let r={"561e1f84b16d26cae646807326c2b228b7ee1897":()=>Promise.resolve().then(t.bind(t,58545)).then(e=>e.updateCompletionParagraph),"6dd6002a719b6773d36a9abebdc44f2f48317665":()=>Promise.resolve().then(t.bind(t,58545)).then(e=>e.updateCompletionAnswers),d73fb79915618bc4d259cb744cc710ab48f2b6e5:()=>Promise.resolve().then(t.bind(t,58545)).then(e=>e.createCompletion),"348f4591ea0e3a316e8f14618a5c97a8c9a991bd":()=>Promise.resolve().then(t.bind(t,20582)).then(e=>e.updateChoice),"7fd32a7c6f7ef331f4a62953ea7aebb0bde55d33":()=>Promise.resolve().then(t.bind(t,20582)).then(e=>e.getChoiceById),"92a39d477e47b317e35e397cb3d435c18e928bc4":()=>Promise.resolve().then(t.bind(t,28176)).then(e=>e.updateMultiOne),"9e29895df62c42ba7a36f6845e4eae27911c1b74":()=>Promise.resolve().then(t.bind(t,28176)).then(e=>e.createMultiOneList),ee02d34ff8acfbec65c3cb8d7dd6651b007a0386:()=>Promise.resolve().then(t.bind(t,28176)).then(e=>e.isChoiceCorrect),"1f308bd869fb5bcb145fc1b44954debb21770560":()=>Promise.resolve().then(t.bind(t,27279)).then(e=>e.updateRespond),"4db26a0ba77ad2ec2566def30570c053733cebd3":()=>Promise.resolve().then(t.bind(t,27279)).then(e=>e.getCorrectAnswerByQuestionId),"7253e3e8d3e871017ea1f263ed398c6f9b834458":()=>Promise.resolve().then(t.bind(t,27279)).then(e=>e.getQuestion),b446b52b7bbff32ef9160e7ceb0bd9ff8c7fc2df:()=>Promise.resolve().then(t.bind(t,87458)).then(e=>e.createOrUpdateResult),"6785dc7ed62977a4bfc22cfeedc567d3de9c6c0b":()=>Promise.resolve().then(t.bind(t,76176)).then(e=>e.updateIdentifyInfo),c6057a1adceb658404a6ade3eecd75691e8fc914:()=>Promise.resolve().then(t.bind(t,76176)).then(e=>e.createIdentifyInfoList),"86302d3347f060b9f30e3f3f852c2f9ce59c3407":()=>Promise.resolve().then(t.bind(t,54793)).then(e=>e.updateMatchingParagraph),"89967293a10776e71758bd6673bc9145d217e69d":()=>Promise.resolve().then(t.bind(t,54793)).then(e=>e.updateMatchingChoiceList),f17d65f8c43eb460fa2cfa26e70f7658fb7bd71d:()=>Promise.resolve().then(t.bind(t,54793)).then(e=>e.createMatching),"1d3fe85ca0cdb37c8635d07197e5c3ec670fdceb":()=>Promise.resolve().then(t.bind(t,47581)).then(e=>e.updateMultiMore),"28f7cee280c6bc4e822c7ea4625120fa53064748":()=>Promise.resolve().then(t.bind(t,47581)).then(e=>e.createMultiMoreList),"456ee2a1690c538bcca175d6e4f9496ac91bd183":()=>Promise.resolve().then(t.bind(t,34892)).then(e=>e.publicAssessment),"5cdf9fc5100262f07752297272faee8055782770":()=>Promise.resolve().then(t.bind(t,34892)).then(e=>e.createAssessment),"827df6d0c9316cf40f1ae02724d60c56d3bb4c93":()=>Promise.resolve().then(t.bind(t,34892)).then(e=>e.getAssessmentIdByPartId),d1041361be3f9a63f1cb8f0c97e40608dbe358d0:()=>Promise.resolve().then(t.bind(t,34892)).then(e=>e.getAssessmentIdByQuestionGroupId),"36644abcfaf2c0bcd1e654d1e7cefc6be26dd9d3":()=>Promise.resolve().then(t.bind(t,64108)).then(e=>e.updatePassage),"712ac66c7aec7c3155ad775639cdacbebf074047":()=>Promise.resolve().then(t.bind(t,64108)).then(e=>e.createPassage),a7eb663f1cc3f9e8d80c55e823203210357fe142:()=>Promise.resolve().then(t.bind(t,64108)).then(e=>e.createPassageSimple),aeea7f3ba66210587e3f012e548a38d44ce94e2b:()=>Promise.resolve().then(t.bind(t,64108)).then(e=>e.createPassageMultiHeading),"20f11d8765c9e25d7bcd2c679949dfa5067d827a":()=>Promise.resolve().then(t.bind(t,24314)).then(e=>e.deleteQuestionGroup),dd7984d76a57c0fc44b5ff68abc6662a6d381f45:()=>Promise.resolve().then(t.bind(t,24314)).then(e=>e.createQuestionGroup),"73499b551777069c61601bfb7422f2e19cc4f012":()=>Promise.resolve().then(t.bind(t,19471)).then(e=>e.updatePart),"5e7320d366fbd4032a11f3151180506df7323d67":()=>Promise.resolve().then(t.bind(t,92786)).then(e=>e.logout),"884c6efa6db813eb7716a2f81345596cffe80b11":()=>Promise.resolve().then(t.bind(t,72621)).then(e=>e.settings)};async function s(e,...a){return(await r[e]()).apply(null,a)}e.exports={"561e1f84b16d26cae646807326c2b228b7ee1897":s.bind(null,"561e1f84b16d26cae646807326c2b228b7ee1897"),"6dd6002a719b6773d36a9abebdc44f2f48317665":s.bind(null,"6dd6002a719b6773d36a9abebdc44f2f48317665"),d73fb79915618bc4d259cb744cc710ab48f2b6e5:s.bind(null,"d73fb79915618bc4d259cb744cc710ab48f2b6e5"),"348f4591ea0e3a316e8f14618a5c97a8c9a991bd":s.bind(null,"348f4591ea0e3a316e8f14618a5c97a8c9a991bd"),"7fd32a7c6f7ef331f4a62953ea7aebb0bde55d33":s.bind(null,"7fd32a7c6f7ef331f4a62953ea7aebb0bde55d33"),"92a39d477e47b317e35e397cb3d435c18e928bc4":s.bind(null,"92a39d477e47b317e35e397cb3d435c18e928bc4"),"9e29895df62c42ba7a36f6845e4eae27911c1b74":s.bind(null,"9e29895df62c42ba7a36f6845e4eae27911c1b74"),ee02d34ff8acfbec65c3cb8d7dd6651b007a0386:s.bind(null,"ee02d34ff8acfbec65c3cb8d7dd6651b007a0386"),"1f308bd869fb5bcb145fc1b44954debb21770560":s.bind(null,"1f308bd869fb5bcb145fc1b44954debb21770560"),"4db26a0ba77ad2ec2566def30570c053733cebd3":s.bind(null,"4db26a0ba77ad2ec2566def30570c053733cebd3"),"7253e3e8d3e871017ea1f263ed398c6f9b834458":s.bind(null,"7253e3e8d3e871017ea1f263ed398c6f9b834458"),b446b52b7bbff32ef9160e7ceb0bd9ff8c7fc2df:s.bind(null,"b446b52b7bbff32ef9160e7ceb0bd9ff8c7fc2df"),"6785dc7ed62977a4bfc22cfeedc567d3de9c6c0b":s.bind(null,"6785dc7ed62977a4bfc22cfeedc567d3de9c6c0b"),c6057a1adceb658404a6ade3eecd75691e8fc914:s.bind(null,"c6057a1adceb658404a6ade3eecd75691e8fc914"),"86302d3347f060b9f30e3f3f852c2f9ce59c3407":s.bind(null,"86302d3347f060b9f30e3f3f852c2f9ce59c3407"),"89967293a10776e71758bd6673bc9145d217e69d":s.bind(null,"89967293a10776e71758bd6673bc9145d217e69d"),f17d65f8c43eb460fa2cfa26e70f7658fb7bd71d:s.bind(null,"f17d65f8c43eb460fa2cfa26e70f7658fb7bd71d"),"1d3fe85ca0cdb37c8635d07197e5c3ec670fdceb":s.bind(null,"1d3fe85ca0cdb37c8635d07197e5c3ec670fdceb"),"28f7cee280c6bc4e822c7ea4625120fa53064748":s.bind(null,"28f7cee280c6bc4e822c7ea4625120fa53064748"),"456ee2a1690c538bcca175d6e4f9496ac91bd183":s.bind(null,"456ee2a1690c538bcca175d6e4f9496ac91bd183"),"5cdf9fc5100262f07752297272faee8055782770":s.bind(null,"5cdf9fc5100262f07752297272faee8055782770"),"827df6d0c9316cf40f1ae02724d60c56d3bb4c93":s.bind(null,"827df6d0c9316cf40f1ae02724d60c56d3bb4c93"),d1041361be3f9a63f1cb8f0c97e40608dbe358d0:s.bind(null,"d1041361be3f9a63f1cb8f0c97e40608dbe358d0"),"36644abcfaf2c0bcd1e654d1e7cefc6be26dd9d3":s.bind(null,"36644abcfaf2c0bcd1e654d1e7cefc6be26dd9d3"),"712ac66c7aec7c3155ad775639cdacbebf074047":s.bind(null,"712ac66c7aec7c3155ad775639cdacbebf074047"),a7eb663f1cc3f9e8d80c55e823203210357fe142:s.bind(null,"a7eb663f1cc3f9e8d80c55e823203210357fe142"),aeea7f3ba66210587e3f012e548a38d44ce94e2b:s.bind(null,"aeea7f3ba66210587e3f012e548a38d44ce94e2b"),"20f11d8765c9e25d7bcd2c679949dfa5067d827a":s.bind(null,"20f11d8765c9e25d7bcd2c679949dfa5067d827a"),dd7984d76a57c0fc44b5ff68abc6662a6d381f45:s.bind(null,"dd7984d76a57c0fc44b5ff68abc6662a6d381f45"),"73499b551777069c61601bfb7422f2e19cc4f012":s.bind(null,"73499b551777069c61601bfb7422f2e19cc4f012"),"5e7320d366fbd4032a11f3151180506df7323d67":s.bind(null,"5e7320d366fbd4032a11f3151180506df7323d67"),"884c6efa6db813eb7716a2f81345596cffe80b11":s.bind(null,"884c6efa6db813eb7716a2f81345596cffe80b11")}},96074:(e,a,t)=>{Promise.resolve().then(t.bind(t,18392))},18392:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>G});var r=t(95344),s=t(60708),d=t(85453),n=t(3729),c=t(79202),i=t(65651),o=t(85222),l=t(31405),b=t(98462),f=t(33183),u=t(92062),h=t(63085),p=t(62409);let m="Switch",[x,w]=(0,b.b)(m),[v,g]=x(m),P=(0,n.forwardRef)((e,a)=>{let{__scopeSwitch:t,name:r,checked:s,defaultChecked:d,required:c,disabled:b,value:u="on",onCheckedChange:h,...m}=e,[x,w]=(0,n.useState)(null),g=(0,l.e)(a,e=>w(e)),P=(0,n.useRef)(!1),j=!x||!!x.closest("form"),[q=!1,_]=(0,f.T)({prop:s,defaultProp:d,onChange:h});return(0,n.createElement)(v,{scope:t,checked:q,disabled:b},(0,n.createElement)(p.WV.button,(0,i.Z)({type:"button",role:"switch","aria-checked":q,"aria-required":c,"data-state":k(q),"data-disabled":b?"":void 0,disabled:b,value:u},m,{ref:g,onClick:(0,o.M)(e.onClick,e=>{_(e=>!e),j&&(P.current=e.isPropagationStopped(),P.current||e.stopPropagation())})})),j&&(0,n.createElement)(y,{control:x,bubbles:!P.current,name:r,value:u,checked:q,required:c,disabled:b,style:{transform:"translateX(-100%)"}}))}),j=(0,n.forwardRef)((e,a)=>{let{__scopeSwitch:t,...r}=e,s=g("SwitchThumb",t);return(0,n.createElement)(p.WV.span,(0,i.Z)({"data-state":k(s.checked),"data-disabled":s.disabled?"":void 0},r,{ref:a}))}),y=e=>{let{control:a,checked:t,bubbles:r=!0,...s}=e,d=(0,n.useRef)(null),c=(0,u.D)(t),o=(0,h.t)(a);return(0,n.useEffect)(()=>{let e=d.current,a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==t&&a){let s=new Event("click",{bubbles:r});a.call(e,t),e.dispatchEvent(s)}},[c,t,r]),(0,n.createElement)("input",(0,i.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:t},s,{tabIndex:-1,ref:d,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function k(e){return e?"checked":"unchecked"}var q=t(91626);let _=n.forwardRef(({className:e,...a},t)=>r.jsx(P,{className:(0,q.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...a,ref:t,children:r.jsx(j,{className:(0,q.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));_.displayName=P.displayName;var E=t(17470),I=t(61351),C=t(16212),T=t(93061),R=t(92549),N=t(26658),A=t(38163),S=t(47782);t(13664);var M=(0,t(28371).$)("884c6efa6db813eb7716a2f81345596cffe80b11"),Z=t(57022),U=t(1250);let G=()=>{let e=(0,N.x)(),[a,t]=(0,n.useState)(),[i,o]=(0,n.useState)(),{update:l}=(0,c.useSession)(),[b,f]=(0,n.useTransition)(),u=(0,s.cI)({resolver:(0,d.F)(S.Ty),defaultValues:{password:void 0,newPassword:void 0,name:e?.name||void 0,email:e?.email||void 0,role:e?.role||void 0,isTwoFactorEnabled:e?.isTwoFactorEnabled||void 0}});return(0,r.jsxs)(I.Zb,{className:"w-[600px]",children:[r.jsx(I.Ol,{children:r.jsx("p",{className:"text-2xl font-semibold text-center",children:"⚙️ Settings"})}),r.jsx(I.aY,{children:r.jsx(T.l0,{...u,children:(0,r.jsxs)("form",{className:"space-y-6",onSubmit:u.handleSubmit(e=>{f(()=>{M(e).then(e=>{e.error&&t(e.error),e.success&&(l(),o(e.success))}).catch(()=>t("Something went wrong!"))})}),children:[(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(T.Wi,{control:u.control,name:"name",render:({field:e})=>(0,r.jsxs)(T.xJ,{children:[r.jsx(T.lX,{children:"Name"}),r.jsx(T.NI,{children:r.jsx(R.I,{...e,placeholder:"John Doe",disabled:b})}),r.jsx(T.zG,{})]})}),e?.isOAuth===!1&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(T.Wi,{control:u.control,name:"email",render:({field:e})=>(0,r.jsxs)(T.xJ,{children:[r.jsx(T.lX,{children:"Email"}),r.jsx(T.NI,{children:r.jsx(R.I,{...e,placeholder:"john.doe@example.com",type:"email",disabled:b})}),r.jsx(T.zG,{})]})}),r.jsx(T.Wi,{control:u.control,name:"password",render:({field:e})=>(0,r.jsxs)(T.xJ,{children:[r.jsx(T.lX,{children:"Password"}),r.jsx(T.NI,{children:r.jsx(R.I,{...e,placeholder:"******",type:"password",disabled:b})}),r.jsx(T.zG,{})]})}),r.jsx(T.Wi,{control:u.control,name:"newPassword",render:({field:e})=>(0,r.jsxs)(T.xJ,{children:[r.jsx(T.lX,{children:"New Password"}),r.jsx(T.NI,{children:r.jsx(R.I,{...e,placeholder:"******",type:"password",disabled:b})}),r.jsx(T.zG,{})]})})]}),r.jsx(T.Wi,{control:u.control,name:"role",render:({field:e})=>(0,r.jsxs)(T.xJ,{children:[r.jsx(T.lX,{children:"Role"}),(0,r.jsxs)(E.Ph,{disabled:b,onValueChange:e.onChange,defaultValue:e.value,children:[r.jsx(T.NI,{children:r.jsx(E.i4,{children:r.jsx(E.ki,{placeholder:"Select a role"})})}),(0,r.jsxs)(E.Bw,{children:[r.jsx(E.Ql,{value:A.UserRole.ADMIN,children:"Admin"}),r.jsx(E.Ql,{value:A.UserRole.USER,children:"User"})]})]}),r.jsx(T.zG,{})]})}),e?.isOAuth===!1&&r.jsx(T.Wi,{control:u.control,name:"isTwoFactorEnabled",render:({field:e})=>(0,r.jsxs)(T.xJ,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[r.jsx(T.lX,{children:"Two Factor Authentication"}),r.jsx(T.pf,{children:"Enable two factor authentication for your account"})]}),r.jsx(T.NI,{children:r.jsx(_,{disabled:b,checked:e.value,onCheckedChange:e.onChange})})]})})]}),r.jsx(Z.X,{message:a}),r.jsx(U.M,{message:i}),r.jsx(C.z,{disabled:b,type:"submit",children:"Save"})]})})})]})}},47782:(e,a,t)=>{"use strict";t.d(a,{A3:()=>o,Tu:()=>i,Ty:()=>d,j5:()=>c,pj:()=>n});var r=t(38163),s=t(29709);let d=s.Ry({name:s.jt(s.Z_()),isTwoFactorEnabled:s.jt(s.O7()),role:s.Km([r.UserRole.ADMIN,r.UserRole.USER]),email:s.jt(s.Z_().email()),password:s.jt(s.Z_().min(1)),newPassword:s.jt(s.Z_().min(6))}).refine(e=>!e.password||!!e.newPassword,{message:"New password is required!",path:["newPassword"]}).refine(e=>!e.newPassword||!!e.password,{message:"Password is required!",path:["password"]}),n=s.Ry({email:s.Z_().email({message:"Email is required"}),password:s.Z_().min(1,{message:"Password is required"}),code:s.jt(s.Z_())}),c=s.Ry({password:s.Z_().min(1,{message:"Minimum of 6 characters required"})}),i=s.Ry({email:s.Z_().email({message:"Email is required"}),password:s.Z_().min(1,{message:"Password is required"}),name:s.Z_().min(1,{message:"Name is required"})}),o=s.Ry({email:s.Z_().email({message:"Email is required"})})},27449:(e,a,t)=>{"use strict";t.d(a,{sendPasswordResetEmail:()=>c,sendTwoFactorTokenEmail:()=>d,sendVerificationEmail:()=>n});let r=new(t(2384)).Resend(process.env.RESEND_API_KEY),s="http://localhost:3000",d=async(e,a)=>{await r.emails.send({from:"onboarding@resend.dev",to:e,subject:"2FA Code",html:`<p>Your 2FA code: ${a}</p>`})},n=async(e,a)=>{let t=`${s}/auth/new-verification?token=${a}`;await r.emails.send({from:"onboarding@resend.dev",to:e,subject:"Confirm your email",html:`<p>Click <a href="${t}">here</a> to confirm email.</p>`})},c=async(e,a)=>{let t=`${s}/auth/new-password?token=${a}`;await r.emails.send({from:"onboarding@resend.dev",to:e,subject:"Reset your password",html:`<p>Click <a href="${t}">here</a> to reset password.</p>`})}},72621:(e,a,t)=>{"use strict";t.r(a),t.d(a,{settings:()=>f});var r=t(98601);t(75811);var s=t(30634),d=t.n(s),n=t(89756),c=t(53183),i=t(35175),o=t(48083),l=t(27449),b=t(17824);let f=async e=>{let a=await (0,c.currentUser)();if(!a||!a.id)return{error:"Unauthorized"};let t=await (0,i.getUserById)(a.id);if(!t)return{error:"Unauthorized"};if(a.isOAuth&&(e.email=void 0,e.password=void 0,e.newPassword=void 0,e.isTwoFactorEnabled=void 0),e.email&&e.email!==a.email){let t=await (0,i.getUserByEmail)(e.email);if(t&&t.id!==a.id)return{error:"Email already in use!"};let r=await (0,o.generateVerificationToken)(e.email);return await (0,l.sendVerificationEmail)(r.email,r.token),{success:"Verification email sent!"}}if(e.password&&e.newPassword&&t.password){if(!await d().compare(e.password,t.password))return{error:"Incorrect password!"};let a=await d().hash(e.newPassword,10);e.password=a,e.newPassword=void 0}return await n.db.user.update({where:{id:t.id},data:{...e}}),{success:"Settings Updated!"}};(0,b.ensureServerEntryExports)([f]),(0,r.createActionProxy)("884c6efa6db813eb7716a2f81345596cffe80b11",f)},48083:(e,a,t)=>{"use strict";t.d(a,{generateVerificationToken:()=>d,getVerificationTokenByToken:()=>n});var r=t(3078),s=t(89756);let d=async e=>{let a=(0,r.v4)(),t=new Date(new Date().getTime()+36e5),d=await c(e);return d&&await s.db.verificationToken.delete({where:{id:d.id}}),await s.db.verificationToken.create({data:{email:e,token:a,expires:t}})},n=async e=>{try{return await s.db.verificationToken.findUnique({where:{token:e}})}catch{return null}},c=async e=>{try{return await s.db.verificationToken.findFirst({where:{email:e}})}catch{return null}}},82849:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>d,__esModule:()=>s,default:()=>n});let r=(0,t(86843).createProxy)(String.raw`/home/ubuntu/github_repo/ieltstrek/app/dashboard/settings/page.tsx`),{__esModule:s,$$typeof:d}=r,n=r.default}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[638,247,876,337,920,625,466,429,540],()=>t(31404));module.exports=r})();